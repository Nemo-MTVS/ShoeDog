<?xml version="1.0" encoding="UTF-8"?>
<queries>
    <query id="getAllColors">
        SELECT
        *
        FROM color
        ORDER BY color_id ASC;
    </query>

    <query id="getAllModels">
        SELECT
        *
        FROM model
        ORDER BY model_id ASC;
    </query>

    <query id="getAllStocks">
        SELECT s.id, m.model_id, c.color_id, m.modelname, c.color, s.SIZE, s.quantity
        FROM model m
        LEFT JOIN stock s ON s.model_id = m.model_id
        LEFT JOIN color c ON c.color_id = s.color_id
        ORDER BY model_id ASC
    </query>

    <query id="getColorById">
        SELECT
        *
        FROM color
        WHERE color_id = ?
    </query>

    <query id="getModelById">
        SELECT
        *
        FROM model
        WHERE model_id = ?
    </query>


    <query id="getStockById">
        SELECT
        *
        FROM stock
        WHERE id = ?
    </query>

    <query id = "getColorByName">
        SELECT
        *
        FROM color
        WHERE color = ?
    </query>

    <query id = "getModelByName">
        SELECT
        *
        FROM model
        WHERE modelname = ?
    </query>

    <query id = "getModelnameList">
        SELECT
        modelname
        FROM model
    </query>

    <query id = "getModelByModelId">
        SELECT
        *
        FROM stock
        WHERE model_id = ?
    </query>

    <query id="addColor">
        INSERT INTO color (color)
        VALUES (?)
    </query>

    <query id="addModel">
        INSERT INTO model (modelname, brandname, listprice, description)
        VALUES (?, ?, ?, ?)
    </query>



    <query id="updateModel">
        UPDATE model SET modelname = ?, brandname = ?, listprice = ?, description = ? WHERE model_id = ?
    </query>

    <query id="updateStock">
        UPDATE stock SET model_id = ?, color_id = ?, size_id = ?, quantity = ? WHERE id = ?
    </query>

    <query id="updateStockQuantityById">
        UPDATE stock SET quantity = ? WHERE id = ?
    </query>

    // 재고 없는 모델 재고 추가
    <query id="addStock">
        INSERT INTO stock (model_id, color_id, size, quantity)
        VALUES (
        (SELECT model_id FROM model WHERE modelname = ?),
        (SELECT color_id FROM color WHERE color = ?),
        ?,  -- size
        ?  -- quantity
        )
    </query>

    // 존재하는 재고 값 변경
    <query id="updateStockQuantity">
        UPDATE stock
        SET quantity = ?
        WHERE model_id = (SELECT model_id FROM model WHERE modelname = ?)
        AND color_id = (SELECT color_id FROM color WHERE color = ?)
        AND size = ?
    </query>

    // 재고 있는지 없는지
    <query id="isStockExist">
        SELECT s.id, m.model_id, c.color_id, m.modelname, c.color, s.SIZE, s.quantity
        FROM model m
        LEFT JOIN stock s ON s.model_id = m.model_id
        LEFT JOIN color c ON c.color_id = s.color_id
        WHERE m.modelname = ? AND c.color = ? AND SIZE= ?
    </query>

</queries>